import React, { useState } from 'react'
import { Link, NavLink } from 'react-router-dom'
import Logout from './Logout'

const Navbar = ({ userRole, id }) => {
	const [showAccount, setShowAccount] = useState(false)

	const handleAccountClick = () => {
		setShowAccount(!showAccount)
	}

	const isLoggedIn =
		userRole.indexOf('ROLE_USER') !== -1 ||
		userRole.indexOf('ROLE_ADMIN') !== -1

	return (
		<nav className='navbar navbar-expand-lg bg-body-tertiary px-5 shadow sticky-top'>
			<div className='container-fluid'>
				<Link to={'/'} className='navbar-brand'>
					<svg
						width='70'
						height='35'
						viewBox='0 0 74 40'
						fill='none'
						xmlns='http://www.w3.org/2000/svg'
					>
						<path
							d='M1.06981 6.56331C1.06981 5.75501 1.17085 4.99426 1.37292 4.28106C1.575 3.56785 1.92566 2.94974 2.4249 2.42672C2.93603 1.89181 3.61952 1.46983 4.47537 1.16078C5.33122 0.851722 6.40697 0.697194 7.70263 0.697194H8.34451C9.64017 0.697194 10.7159 0.851722 11.5718 1.16078C12.4276 1.46983 13.1052 1.89181 13.6044 2.42672C14.1155 2.94974 14.4721 3.56785 14.6742 4.28106C14.8763 4.99426 14.9773 5.75501 14.9773 6.56331V7.49048C14.9773 8.29878 14.8763 9.05954 14.6742 9.77274C14.4721 10.4859 14.1155 11.11 13.6044 11.6449C13.1052 12.1679 12.4276 12.584 11.5718 12.893C10.7159 13.2021 9.64017 13.3566 8.34451 13.3566H7.70263C6.40697 13.3566 5.33122 13.2021 4.47537 12.893C3.61952 12.584 2.93603 12.1679 2.4249 11.6449C1.92566 11.11 1.575 10.4859 1.37292 9.77274C1.17085 9.05954 1.06981 8.29878 1.06981 7.49048V6.56331ZM4.27924 7.0269C4.27924 7.4786 4.29707 7.91841 4.33273 8.34633C4.38027 8.76237 4.51697 9.13086 4.74282 9.4518C4.98056 9.77274 5.34905 10.0283 5.84829 10.2185C6.35942 10.4087 7.08451 10.5038 8.02357 10.5038C8.96262 10.5038 9.68177 10.4087 10.181 10.2185C10.6921 10.0283 11.0606 9.77274 11.2865 9.4518C11.5242 9.13086 11.6609 8.76237 11.6966 8.34633C11.7441 7.91841 11.7679 7.4786 11.7679 7.0269C11.7679 6.5752 11.7441 6.14133 11.6966 5.7253C11.6609 5.30926 11.5242 4.94077 11.2865 4.61983C11.0606 4.29889 10.6921 4.04332 10.181 3.85313C9.68177 3.66294 8.96262 3.56785 8.02357 3.56785C7.08451 3.56785 6.35942 3.66294 5.84829 3.85313C5.34905 4.04332 4.98056 4.29889 4.74282 4.61983C4.51697 4.94077 4.38027 5.30926 4.33273 5.7253C4.29707 6.14133 4.27924 6.5752 4.27924 7.0269ZM21.2033 13V3.90662H16.5674V1.0538H29.0664V3.90662H24.4127V13H21.2033ZM42.104 3.90662H33.8843V5.68964H40.3209V8.54246H33.8843V10.1472H42.104V13H30.6748V1.0538H42.104V3.90662ZM44.2216 10.3611C44.697 10.3611 45.012 10.2482 45.1666 10.0224C45.333 9.79652 45.4281 9.46369 45.4518 9.02388L45.8084 1.0538H56.6848V13H53.4754V3.90662H48.8039L48.5721 9.38048C48.5365 10.0105 48.4473 10.5632 48.3047 11.0387C48.1739 11.5142 47.96 11.9124 47.6628 12.2333C47.3775 12.5542 46.9971 12.7979 46.5217 12.9643C46.0581 13.1308 45.4816 13.214 44.7921 13.214C44.5187 13.214 44.2453 13.2021 43.9719 13.1783C43.6985 13.1545 43.4549 13.107 43.2409 13.0357V10.3076C43.3835 10.3314 43.55 10.3493 43.7402 10.3611C43.9303 10.3611 44.0908 10.3611 44.2216 10.3611ZM71.3032 9.61227C71.3032 10.1353 71.2259 10.6226 71.0714 11.0743C70.9169 11.526 70.6435 11.9242 70.2512 12.269C69.859 12.6018 69.3359 12.8633 68.6822 13.0535C68.0284 13.2556 67.2023 13.3566 66.2038 13.3566H65.7045C64.6228 13.3566 63.5174 13.3269 62.3881 13.2675C61.2708 13.208 60.201 13.1189 59.1787 13V1.0538H62.3881V5.33303C62.9706 5.23794 63.5649 5.18445 64.1711 5.17256C64.7892 5.16068 65.4192 5.15473 66.0611 5.15473H66.5604C67.4875 5.15473 68.2542 5.25577 68.8605 5.45785C69.4786 5.64803 69.9659 5.91549 70.3225 6.2602C70.6791 6.59303 70.9288 6.99124 71.0714 7.45482C71.2259 7.90652 71.3032 8.38793 71.3032 8.89906V9.61227ZM65.5619 8.00756C65.0032 8.00756 64.4742 8.01944 63.975 8.04322C63.4758 8.0551 62.9468 8.09671 62.3881 8.16803V10.3433C62.9825 10.4027 63.5827 10.4443 64.189 10.4681C64.8071 10.4919 65.3063 10.5038 65.6867 10.5038C66.3761 10.5038 66.9051 10.4741 67.2736 10.4146C67.654 10.3552 67.9274 10.272 68.0938 10.165C68.2721 10.0461 68.3731 9.90944 68.3969 9.75491C68.4325 9.60038 68.4504 9.43397 68.4504 9.25567C68.4504 9.07737 68.4325 8.91095 68.3969 8.75642C68.3731 8.6019 68.2721 8.47114 68.0938 8.36416C67.9155 8.25718 67.6302 8.17397 67.2379 8.11454C66.8457 8.04322 66.287 8.00756 65.5619 8.00756Z'
							fill='#FF780A'
						/>
						<path
							d='M24.7303 16.3503V20.9574C14.3067 20.9574 8.68108 20.9574 7.85355 20.9574C7.24882 20.9574 6.81118 21.0529 6.54065 21.2438C6.27011 21.4348 6.13484 21.6655 6.13484 21.9361V29.4316C6.13484 29.8772 6.24624 30.1716 6.46903 30.3148C6.70774 30.4421 7.16925 30.5058 7.85355 30.5058C8.68108 30.5058 12.0548 30.5058 17.9748 30.5058C18.5955 30.5058 19.0411 30.4103 19.3116 30.2193C19.5822 30.0124 19.7174 29.7498 19.7174 29.4316V27.2832H12.6277V23.7503H24.8019C24.8019 26.2806 24.8019 28.421 24.8019 30.1716C24.8019 30.9513 24.7144 31.6038 24.5394 32.129C24.3802 32.6382 24.0858 33.1077 23.6561 33.5374C23.2424 33.9352 22.7809 34.2455 22.2716 34.4683C21.7783 34.6752 21.1497 34.8344 20.3858 34.9458C19.6379 35.0412 18.7148 35.1049 17.6168 35.1367C16.5346 35.1686 14.9591 35.1845 12.8903 35.1845C10.8215 35.1845 9.24602 35.1686 8.16387 35.1367C7.08172 35.1049 6.16667 35.0412 5.41871 34.9458C4.67075 34.8344 4.05806 34.6752 3.58065 34.4683C3.10323 34.2455 2.66559 33.9352 2.26774 33.5374C1.79032 33.1236 1.46409 32.6621 1.28903 32.1529C1.11398 31.6277 1.02645 30.9673 1.02645 30.1716C1.02645 28.421 1.02645 25.5406 1.02645 21.5303C1.02645 19.8275 1.5357 18.5384 2.55419 17.6632C3.57269 16.7879 5.1243 16.3503 7.20903 16.3503C10.3918 16.3503 16.2323 16.3503 24.7303 16.3503ZM42.682 29.1212H37.7407L33.1337 24.9916H40.9633C41.5681 24.9916 42.1012 24.8165 42.5627 24.4664C43.0242 24.1004 43.2549 23.5911 43.2549 22.9387C43.2231 22.4135 42.9844 21.9679 42.5388 21.6019C42.0932 21.2359 41.5919 21.0529 41.0349 21.0529H32.322V35.1129H26.4737V16.3503H41.5362C42.8412 16.3503 43.9313 16.4458 44.8066 16.6367C45.6818 16.8277 46.398 17.146 46.9549 17.5916C47.5278 18.0212 47.9496 18.6101 48.2201 19.358C48.4906 20.106 48.6259 21.0529 48.6259 22.1987C48.6259 24.5698 48.1724 26.3204 47.2653 27.4503C46.3741 28.5643 44.8463 29.1212 42.682 29.1212ZM64.2232 20.6948V35.1129H58.3748V20.6948H50.1393V16.3503H72.1961V20.6948H64.2232Z'
							fill='#FF780A'
						/>
					</svg>
				</Link>

				<button
					className='navbar-toggler'
					type='button'
					data-bs-toggle='collapse'
					data-bs-target='#navbarScroll'
					aria-controls='navbarScroll'
					aria-expanded='false'
					aria-label='Toggle navigation'
				>
					<span className='navbar-toggler-icon'></span>
				</button>

				<div className='collapse navbar-collapse' id='navbarScroll'>
					<ul className='navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll'>
						<li className='nav-item'>
							<NavLink
								className='nav-link'
								aria-current='page'
								to={'/'}
							>
								Главная
							</NavLink>
						</li>
						<li className='nav-item'>
							<NavLink
								className='nav-link'
								aria-current='page'
								to={'/hotels'}
								style={{
									marginLeft: '7px',
									marginRight: '10px',
								}}
							>
								Отели
							</NavLink>
						</li>

						{userRole.indexOf('ROLE_ADMIN') !== -1 && (
							<li className='nav-item'>
								<NavLink
									className='nav-link'
									aria-current='page'
									to={'/users'}
								>
									Пользователи
								</NavLink>
							</li>
						)}
					</ul>

					<ul
						className='d-flex navbar-nav'
						style={{ marginRight: '20px' }}
					>
						<li className='nav-item dropdown'>
							<a
								className={`nav-link dropdown-toggle ${
									showAccount ? 'show' : ''
								}`}
								href='#'
								role='button'
								data-bs-toggle='dropdown'
								aria-expanded='false'
								onClick={handleAccountClick}
							>
								{' '}
								Аккаунт
							</a>

							<ul
								className={`dropdown-menu ${
									showAccount ? 'show' : ''
								}`}
								aria-labelledby='navbarDropdown'
							>
								{isLoggedIn ? (
									<div>
										<Logout id={id} />
										<Link></Link>
									</div>
								) : (
									<li>
										<Link
											className='dropdown-item'
											to={'/login'}
										>
											Логин
										</Link>
									</li>
								)}
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>
	)
}

export default Navbar
